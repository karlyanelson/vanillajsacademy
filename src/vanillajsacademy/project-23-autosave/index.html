---
layout: layout_project.njk
title: "Project 23: Autosave"
tags: project
---

<main>
    <h1>{{title}}</h1>
    <form class="save-me" id="save-me">
      <div>
        <label for="name">Name</label>
        <input type="text" name="name" id="name">
      </div>
    
      <div>
        <label for="address">Address</label>
        <input type="text" name="address" id="address">
      </div>

      <div>
        <label for="email">Email</label>
        <input type="email" name="email" id="email">
      </div>
    
      <div>
        <label for="more">Additional thoughts?</label>
        <textarea name="more" id="more"></textarea>
      </div>
      <p>
        <button type="submit">Submit</button>
      </p>

    </form>
</main>

<script>
;(function() {
  // variables
  let form = document.querySelector('#save-me')
  let inputs = Array.prototype.slice.call(
    form.querySelectorAll("input, textarea")
  );

  // methods
  function saveData(event) {
    if (!event.target.value || !event.target.id ) {
      return
    }
    sessionStorage.setItem(event.target.id, event.target.value);
  }

  function loadData() {
    inputs.forEach(function (input) {
      let savedValue = sessionStorage.getItem(input.id);

      if (!savedValue) {
        return;
      }

      input.value = savedValue;
    });
  }

  function clearData(event) {
    event.preventDefault();
    inputs.forEach(function (input) {
      sessionStorage.removeItem(input.id);
      input.value = "";
    });
  }

  // events
  loadData();
  document.addEventListener("input", saveData, false);
  document.addEventListener("submit", clearData, false);

})();




</script>